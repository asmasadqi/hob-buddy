<div class="container">
  <%# welcome with name %>
  <div>
    <h1><%= @activity.title.capitalize %> with <%=User.find(@activity.user_id).first_name.capitalize%></h1>
  </div>
  <%# card %>
  <div class="card hbuddy-card">
      <% if @activity.photo.attached? %>
        <%= cl_image_tag @activity.photo.key, class: "card-img-top" %>
      <% end %>
      <% if current_user.avatar.attached? %>
        <%= cl_image_tag current_user.avatar.key, class: "hbuddy-match-avatar bordered", width:50, height:50 %>
      <% end %>
    <div class="card-body">
      <span class="badge text-bg-warning text-light"> <%= @activity.preference.category %></span>
      <div class="hbuddy-card-location d-flex align-items-center">
        <span class="material-symbols-outlined">location_on</span>
        <div>
          <p> <%= @activity.location.capitalize %></p>
        </div>
      </div>
      <div class="d-flex align-items-center">
        <span class="material-symbols-outlined">today</span>
        <p class="card-text"> <%=@activity.start_date.strftime('%a, %b %e %k:%M') %> ~ <%= @activity.end_date.strftime('%a, %b %e %k:%M') %></p>
      </div>
      <div class="d-flex align-items-center">
        <span class="material-symbols-outlined">payments</span>
        <% if @activity.total_price == nil || 0 %>
          <p> free</p>
        <% else %>
          <p class="card-text"><%= @activity.total_price %>â‚¬</p>
        <% end %>
      </div>
    </div>
  </div>
  <br>
  <%# join button %>
  <div class="d-grid gap-2">
    <% unless current_user %>
      <button type="button" class="btn btn-outline-danger btn-rounded">Join</button>
    <% end %>
  </div>
  <br>
  <%# description %>
  <div class="card-body">
    <%# small pill %>
    <div class="d-flex flex-row mb-3">
      <div class="p-2">
        <% if @activity.min_persons == nil %>
          <span class="badge text-bg-success text-light">No buddy limit</span>
        <% else %>
          <span class="badge text-bg-success text-light"><%= @activity.min_persons %> ~ <%= @activity.max_persons %> buddies</span>
        <% end %>
      </div>
      <div class="p-2">
        <% if @activity.gender == "Not specified" %>
          <span class="badge text-bg-success text-light">Mixed group</span>
        <% else %>
          <span class="badge text-bg-success text-light">Group of <%= @activity.gender %></span>
        <% end %>
      </div>
      <div class="p-2">
        <% if @activity.age_range != nil %>
          <span class="badge text-bg-success text-light"><%= @activity.age_range %> years-old</span>
        <% end %>
      </div>
    </div>
    <br>
    <%# description %>
    <div class="card-body">
      <p>Description:</p>
      <p><%= @activity.description %></p>
    </div>
    <br>
    <%# additional info %>
    <div class="card-body">
      <p>Additional info:</p>
      <p><%= @activity.useful_information %></p>
    </div>
  </div>

  <%# map %>
  <div class="border rounded" style="width: 100%; height: 250px;"
    data-controller="map"
    data-map-markers-value="<%= @markers.to_json %>"
    data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
  </div>

</div>
